<!DOCTYPE HTML>
<!-- This is the code for the 101companies application written in HTML 5 & JavaScript -->

<!-- CLIENT-SIDE, SESSION-STORAGE -->
<html>
<head>

</head>
<body>

<script type="text/javascript">
// init the storage object
var storageObject = localStorage;
</script>

<script type="text/javascript" src="company.js"></script>
<script type="text/javascript" src="controller.js"></script>
<script type="text/javascript" src="model.js"></script>

<center>
<script type="text/javascript">

function process() {
    var parameters = location.search.substring(1).split("&");

	var temp = parameters[0].split("=");
	departmentName = unescape(temp[1]);
}
process();

document.write("<h1>" + model.getCompanyName() + "</h1>");
document.write("<h3>" + departmentName + "</h3>");



</script>

<div id="content" name="content"></div><br>
<div id="total" name="total"></div>

<script type="text/javascript">

departmentList = model.getSubDepartments(departmentName);

var content = "Departments: <br>";
content += "<form action=\"select1.htm\">";
content += "<p>";
content += "<select name=\"Departments\" size=\"5\" STYLE=\"width:100px;\">";

for (var i = 0; i < departmentList.length; i++) {
	if(i == 0) {
		content += "<option value=\"" + departmentList[i] + "\" selected>";
	} else {
		content += "<option value=\"" + departmentList[i] + "\">";
	}
	content += departmentList[i] + "</option>";
}

content += "</select>";
content += "</p>";
		
content += "<input type=\"button\" value=\"select\" onclick=\"controller.selectDepartment(this.form.Departments.options[this.form.Departments.selectedIndex].value)\" >";
content += "</form>";

document.querySelector('#content').innerHTML = content;

function refreshTotal() {
	var total = model.totalDepartment(departmentName);
	document.querySelector('#total').innerHTML = "<br>Total: " + total + " <input type=\"button\" name=\"cut\" value=\"cut\" onclick=\"controller.cutDepartment('" + departmentName + "')\">";
}
refreshTotal();

</script>
</center>

</body>
</html>